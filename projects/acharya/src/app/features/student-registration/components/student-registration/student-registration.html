<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-8 col-xl-7">
      <!-- Header -->
      <div class="text-center mb-5">
        <div class="d-flex justify-content-center mb-3">
          <a routerLink="/home" class="btn btn-outline-primary btn-sm me-3">
            <i class="bi bi-house me-1"></i>
            Home
          </a>
          <a routerLink="/students" class="btn btn-outline-secondary btn-sm">
            <i class="bi bi-people me-1"></i>
            Students
          </a>
        </div>
        <h1 class="display-5 fw-bold text-primary mb-3">Student Registration</h1>
        <p class="lead text-muted">Complete the form below to register a new student</p>
      </div>

      <!-- Registration Form -->
      <div class="card shadow-sm border-0">
        <div class="card-body p-4 p-lg-5">
          <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()">
            
            <!-- Personal Information Section -->
            <div class="mb-4">
              <h4 class="h5 text-primary mb-3">Personal Information</h4>
              
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="firstName" class="form-label">First Name *</label>
                  <input 
                    type="text" 
                    id="firstName" 
                    class="form-control" 
                    formControlName="firstName"
                    [class.is-invalid]="firstNameErrors()"
                    placeholder="Enter first name">
                  <div class="invalid-feedback" *ngIf="firstNameErrors()">
                    {{ firstNameErrors() }}
                  </div>
                </div>
                
                <div class="col-md-6">
                  <label for="lastName" class="form-label">Last Name *</label>
                  <input 
                    type="text" 
                    id="lastName" 
                    class="form-control" 
                    formControlName="lastName"
                    [class.is-invalid]="lastNameErrors()"
                    placeholder="Enter last name">
                  <div class="invalid-feedback" *ngIf="lastNameErrors()">
                    {{ lastNameErrors() }}
                  </div>
                </div>
              </div>

              <div class="row g-3 mt-2">
                <div class="col-md-6">
                  <label for="email" class="form-label">Email Address *</label>
                  <input 
                    type="email" 
                    id="email" 
                    class="form-control" 
                    formControlName="email"
                    [class.is-invalid]="emailErrors()"
                    placeholder="Enter email address">
                  <div class="invalid-feedback" *ngIf="emailErrors()">
                    {{ emailErrors() }}
                  </div>
                </div>
                
                <div class="col-md-6">
                  <label for="dateOfBirth" class="form-label">Date of Birth *</label>
                  <input 
                    type="date" 
                    id="dateOfBirth" 
                    class="form-control" 
                    formControlName="dateOfBirth">
                </div>
              </div>

              <div class="row g-3 mt-2">
                <div class="col-md-6">
                  <label for="phoneNumber" class="form-label">Phone Number *</label>
                  <input 
                    type="tel" 
                    id="phoneNumber" 
                    class="form-control" 
                    formControlName="phoneNumber"
                    [class.is-invalid]="phoneErrors()"
                    placeholder="Enter phone number">
                  <div class="invalid-feedback" *ngIf="phoneErrors()">
                    {{ phoneErrors() }}
                  </div>
                </div>
                
                <div class="col-md-6">
                  <label for="grade" class="form-label">Grade Level *</label>
                  <select id="grade" class="form-select" formControlName="grade">
                    <option value="">Select grade</option>
                    <option *ngFor="let grade of gradeOptions" [value]="grade">
                      {{ grade }}
                    </option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Address Section -->
            <div class="mb-4">
              <h4 class="h5 text-primary mb-3">Address Information</h4>
              
              <div class="mb-3">
                <label for="address" class="form-label">Street Address *</label>
                <input 
                  type="text" 
                  id="address" 
                  class="form-control" 
                  formControlName="address"
                  placeholder="Enter street address">
              </div>

              <div class="row g-3">
                <div class="col-md-4">
                  <label for="city" class="form-label">City *</label>
                  <input 
                    type="text" 
                    id="city" 
                    class="form-control" 
                    formControlName="city"
                    placeholder="Enter city">
                </div>
                
                <div class="col-md-4">
                  <label for="state" class="form-label">State *</label>
                  <select id="state" class="form-select" formControlName="state">
                    <option value="">Select state</option>
                    <option *ngFor="let state of stateOptions" [value]="state">
                      {{ state }}
                    </option>
                  </select>
                </div>
                
                <div class="col-md-4">
                  <label for="zipCode" class="form-label">ZIP Code *</label>
                  <input 
                    type="text" 
                    id="zipCode" 
                    class="form-control" 
                    formControlName="zipCode"
                    [class.is-invalid]="zipCodeErrors()"
                    placeholder="Enter ZIP code">
                  <div class="invalid-feedback" *ngIf="zipCodeErrors()">
                    {{ zipCodeErrors() }}
                  </div>
                </div>
              </div>
            </div>

            <!-- School Information -->
            <div class="mb-4">
              <h4 class="h5 text-primary mb-3">School Information</h4>
              
              <div class="mb-3">
                <label for="schoolName" class="form-label">School Name *</label>
                <input 
                  type="text" 
                  id="schoolName" 
                  class="form-control" 
                  formControlName="schoolName"
                  placeholder="Enter school name">
              </div>
            </div>

            <!-- Parent/Guardian Information -->
            <div class="mb-4">
              <h4 class="h5 text-primary mb-3">Parent/Guardian Information</h4>
              
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="parentName" class="form-label">Parent/Guardian Name *</label>
                  <input 
                    type="text" 
                    id="parentName" 
                    class="form-control" 
                    formControlName="parentName"
                    placeholder="Enter parent/guardian name">
                </div>
                
                <div class="col-md-6">
                  <label for="parentPhone" class="form-label">Parent/Guardian Phone *</label>
                  <input 
                    type="tel" 
                    id="parentPhone" 
                    class="form-control" 
                    formControlName="parentPhone"
                    placeholder="Enter parent/guardian phone">
                </div>
              </div>

              <div class="mt-3">
                <label for="parentEmail" class="form-label">Parent/Guardian Email *</label>
                <input 
                  type="email" 
                  id="parentEmail" 
                  class="form-control" 
                  formControlName="parentEmail"
                  placeholder="Enter parent/guardian email">
              </div>
            </div>

            <!-- Emergency Contact -->
            <div class="mb-4">
              <h4 class="h5 text-primary mb-3">Emergency Contact</h4>
              
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="emergencyContact" class="form-label">Emergency Contact Name *</label>
                  <input 
                    type="text" 
                    id="emergencyContact" 
                    class="form-control" 
                    formControlName="emergencyContact"
                    placeholder="Enter emergency contact name">
                </div>
                
                <div class="col-md-6">
                  <label for="emergencyPhone" class="form-label">Emergency Contact Phone *</label>
                  <input 
                    type="tel" 
                    id="emergencyPhone" 
                    class="form-control" 
                    formControlName="emergencyPhone"
                    placeholder="Enter emergency contact phone">
                </div>
              </div>
            </div>

            <!-- Medical Information -->
            <div class="mb-4">
              <h4 class="h5 text-primary mb-3">Medical Information (Optional)</h4>
              
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="medicalConditions" class="form-label">Medical Conditions</label>
                  <textarea 
                    id="medicalConditions" 
                    class="form-control" 
                    formControlName="medicalConditions"
                    rows="3"
                    placeholder="List any medical conditions (optional)"></textarea>
                </div>
                
                <div class="col-md-6">
                  <label for="allergies" class="form-label">Allergies</label>
                  <textarea 
                    id="allergies" 
                    class="form-control" 
                    formControlName="allergies"
                    rows="3"
                    placeholder="List any allergies (optional)"></textarea>
                </div>
              </div>
            </div>

            <!-- Error Messages -->
            <div class="mb-4" *ngIf="formErrors().length > 0">
              <div class="alert alert-danger" role="alert">
                <ul class="mb-0">
                  <li *ngFor="let error of formErrors()">{{ error }}</li>
                </ul>
              </div>
            </div>

            <!-- Form Actions -->
            <div class="d-flex gap-3 justify-content-end">
              <button 
                type="button" 
                class="btn btn-outline-secondary px-4"
                (click)="resetForm()"
                [disabled]="isSubmitting()">
                Reset
              </button>
              
              <button 
                type="submit" 
                class="btn btn-primary px-4"
                [disabled]="registrationForm.invalid || isSubmitting()">
                <span *ngIf="isSubmitting()" class="spinner-border spinner-border-sm me-2" role="status"></span>
                {{ isSubmitting() ? 'Registering...' : 'Register Student' }}
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Footer Note -->
      <div class="text-center mt-4">
        <p class="text-muted small">
          * Required fields. All information will be kept confidential and secure.
        </p>
      </div>
    </div>
  </div>
</div>
